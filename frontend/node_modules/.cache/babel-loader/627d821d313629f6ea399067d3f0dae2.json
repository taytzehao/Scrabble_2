{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TzeHaoTay\\\\Desktop\\\\CS\\\\scrabble2\\\\frontend\\\\src\\\\Games_page\\\\Action\\\\Actionbar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { UserContext } from '../../UserContext.js';\nimport { GamesContext, BlocksContext, PlayerListContext, AnalyticsDataContext, SachetContext } from '../GamesContext.js';\nimport Draw_button from \"./Draw_button.js\";\nimport Score_button from \"./Score_button.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Action_bar() {\n  _s();\n\n  const {\n    playerlistState,\n    setplayerlistState\n  } = useContext(PlayerListContext);\n  const {\n    gameState,\n    setgameState\n  } = useContext(GamesContext);\n  const {\n    boardState,\n    setboardState\n  } = useContext(BlocksContext);\n  const {\n    analyticsdataState,\n    setanalyticsdataState\n  } = useContext(AnalyticsDataContext);\n  const {\n    sachetState,\n    setsachetState\n  } = useContext(SachetContext);\n  const playerlistRef = useRef(null);\n  const gamestateRef = useRef(null);\n  const boardstateRef = useRef(null);\n  const sachetstateRef = useRef(null);\n  playerlistRef.current = playerlistState;\n  gamestateRef.current = gameState;\n  boardstateRef.current = boardState;\n  sachetstateRef.current = sachetState;\n\n  function next_turn(updated_sachet) {\n    setboardState(prevboardState => {\n      let tempboardState = { ...prevboardState\n      };\n      gamestateRef.current.just_added.forEach(index => {\n        tempboardState.blocks[index].content.just_added = false;\n        tempboardState.blocks[index].content.challenge = true;\n        tempboardState.blocks[index].content.active = false;\n        tempboardState.blocks[index].content.canDrag = false;\n        tempboardState.blocks[index].content.canDrop = false;\n        tempboardState.blocks[index].content.index = null;\n      });\n      return tempboardState;\n    });\n    setanalyticsdataState(prevanalyticsdata => {\n      let newanalyticsdata = [...prevanalyticsdata];\n      let analytics_index;\n\n      for (let index of gamestateRef.current.just_added) {\n        console.log(\"INDEX\", index);\n        analytics_index = newanalyticsdata.findIndex(data => {\n          console.log(\"NEW ANALYTICS DATA\", boardstateRef.current.blocks[index].content.alphabet);\n          return data.alphabet == boardstateRef.current.blocks[index].content.alphabet;\n        })(newanalyticsdata[analytics_index].num == 1) ? newanalyticsdata.splice(analytics_index, 1) : newanalyticsdata[analytics_index].num -= 1;\n      }\n\n      return newanalyticsdata;\n    });\n    setgameState(prevgameState => ({ ...prevgameState,\n      turn_num: prevgameState.turn_num + 1,\n      just_added: []\n    }));\n    setsachetState(updated_sachet);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Action_bar\",\n    children: [/*#__PURE__*/_jsxDEV(Score_button, {\n      next_funct: next_turn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Draw_button, {\n      next_funct: next_turn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Action_bar, \"DFeVQTOe3IuaABLKVGWQdLbKH3c=\");\n\n_c = Action_bar;\nexport default Action_bar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Action_bar\");","map":{"version":3,"sources":["C:/Users/TzeHaoTay/Desktop/CS/scrabble2/frontend/src/Games_page/Action/Actionbar.js"],"names":["React","useState","useContext","useEffect","useRef","UserContext","GamesContext","BlocksContext","PlayerListContext","AnalyticsDataContext","SachetContext","Draw_button","Score_button","Action_bar","playerlistState","setplayerlistState","gameState","setgameState","boardState","setboardState","analyticsdataState","setanalyticsdataState","sachetState","setsachetState","playerlistRef","gamestateRef","boardstateRef","sachetstateRef","current","next_turn","updated_sachet","prevboardState","tempboardState","just_added","forEach","index","blocks","content","challenge","active","canDrag","canDrop","prevanalyticsdata","newanalyticsdata","analytics_index","console","log","findIndex","data","alphabet","num","splice","prevgameState","turn_num"],"mappings":"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","sourcesContent":["import React, {useState,useContext,useEffect,useRef} from 'react';\r\nimport {UserContext} from '../../UserContext.js'\r\nimport {GamesContext,BlocksContext,PlayerListContext,AnalyticsDataContext,SachetContext} from '../GamesContext.js'\r\nimport Draw_button from \"./Draw_button.js\";\r\nimport Score_button from \"./Score_button.js\";\r\n\r\nfunction Action_bar() {\r\n  const {playerlistState,setplayerlistState}=useContext(PlayerListContext)\r\n  const {gameState,setgameState}=useContext(GamesContext)   \r\n  const {boardState,setboardState}=useContext(BlocksContext)\r\n  const {analyticsdataState,setanalyticsdataState}=useContext(AnalyticsDataContext)\r\n  const {sachetState,setsachetState}=useContext(SachetContext)   \r\n  const playerlistRef=useRef(null);\r\n  const gamestateRef=useRef(null);\r\n  const boardstateRef=useRef(null);\r\n  const sachetstateRef=useRef(null);\r\n  playerlistRef.current=playerlistState\r\n  gamestateRef.current=gameState\r\n  boardstateRef.current=boardState\r\n  sachetstateRef.current=sachetState\r\n\r\n  function next_turn(updated_sachet){\r\n    setboardState((prevboardState=>{\r\n      let tempboardState={...prevboardState}\r\n      gamestateRef.current.just_added.forEach(index=>{\r\n          tempboardState.blocks[index].content.just_added=false\r\n          tempboardState.blocks[index].content.challenge=true\r\n          tempboardState.blocks[index].content.active=false\r\n          tempboardState.blocks[index].content.canDrag=false\r\n          tempboardState.blocks[index].content.canDrop=false\r\n          tempboardState.blocks[index].content.index=null\r\n      })\r\n      return tempboardState\r\n  }))\r\n    setanalyticsdataState((prevanalyticsdata=>{\r\n      let newanalyticsdata=[...prevanalyticsdata]\r\n      let analytics_index\r\n      for (let index of gamestateRef.current.just_added){\r\n        console.log(\"INDEX\",index)\r\n        analytics_index=newanalyticsdata.findIndex(data=>{\r\n          console.log(\"NEW ANALYTICS DATA\",boardstateRef.current.blocks[index].content.alphabet)\r\n\r\n          return data.alphabet==boardstateRef.current.blocks[index].content.alphabet})\r\n        (newanalyticsdata[analytics_index].num==1) ? newanalyticsdata.splice(analytics_index,1) : newanalyticsdata[analytics_index].num-=1\r\n      }\r\n      return newanalyticsdata\r\n  }))\r\n    setgameState((prevgameState=>({...prevgameState,\r\n      turn_num:prevgameState.turn_num+1, \r\n      just_added:[]     \r\n  }))) \r\n    setsachetState(updated_sachet)\r\n  }\r\n  \r\n\r\n  return (\r\n    <div className=\"Action_bar\">\r\n      <Score_button next_funct={next_turn}/>\r\n      <Draw_button next_funct={next_turn}/>   \r\n    </div>)\r\n     \r\n  }\r\n\r\nexport default Action_bar;"]},"metadata":{},"sourceType":"module"}