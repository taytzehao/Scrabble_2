{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TzeHaoTay\\\\Desktop\\\\CS\\\\scrabble2\\\\frontend\\\\src\\\\Games_page\\\\Action\\\\Draw_button.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { UserContext } from '../../UserContext.js';\nimport { GamesContext, BlocksContext, PlayerListContext } from '../GamesContext.js';\nimport './Actionbar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Draw_button() {\n  _s();\n\n  const {\n    profile,\n    setprofile\n  } = useContext(UserContext);\n  const {\n    playerlistState,\n    setplayerlistState\n  } = useContext(PlayerListContext);\n  const {\n    gameState,\n    setgameState\n  } = useContext(GamesContext);\n  const {\n    boardState,\n    setboardState\n  } = useContext(BlocksContext);\n  const playerlistRef = useRef(null);\n  const gamestateRef = useRef(null);\n  const boardstateRef = useRef(null);\n  playerlistRef.current = playerlistState;\n  gamestateRef.current = gameState;\n  boardstateRef.current = boardState;\n  const [drawActive, setdrawActive] = useState(false);\n\n  function Draw() {\n    setgameState(prevgameState => {\n      let newgameState = { ...prevgameState\n      };\n      newgameState.Player_list[prevgameState.your_index].draw();\n\n      if (newgameState.Sachet.length == 0) {\n        newgameState.endgame = true;\n        return newgameState;\n      } else {\n        newgameState.Sachet = newgameState.Player_list[prevgameState.your_index].Sachet.concat(newgameState.Player_list[prevgameState.your_index].delete_list);\n        newgameState.just_added = [];\n        newgameState.turn_num += 1;\n        return newgameState;\n      }\n    });\n  }\n\n  useEffect(() => {\n    let active_player_num = gameState.turn_num % gameState.player_num;\n    let nothing_placed = !boardState.blocks.findIndex(block => {\n      if (block.content) {\n        if (block.content.just_added) {\n          return true;\n        }\n      }\n\n      return false;\n    });\n\n    if (active_player_num == gameState.your_index && !playerlistState[gameState.your_index].delete_list && nothing_placed) {\n      setdrawActive(true);\n    } else {\n      setdrawActive(false);\n    }\n  }, [gamestateRef.current.player_turn, boardstateRef.current]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"draw_button\",\n      onClick: Draw,\n      disabled: drawActive,\n      children: \"Draw\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Draw_button, \"JgeP+E4a7bmEHZCiQw8GNNoGWiU=\");\n\n_c = Draw_button;\nexport default Draw_button;\n\nvar _c;\n\n$RefreshReg$(_c, \"Draw_button\");","map":{"version":3,"sources":["C:/Users/TzeHaoTay/Desktop/CS/scrabble2/frontend/src/Games_page/Action/Draw_button.js"],"names":["React","useState","useContext","useEffect","useRef","UserContext","GamesContext","BlocksContext","PlayerListContext","Draw_button","profile","setprofile","playerlistState","setplayerlistState","gameState","setgameState","boardState","setboardState","playerlistRef","gamestateRef","boardstateRef","current","drawActive","setdrawActive","Draw","prevgameState","newgameState","Player_list","your_index","draw","Sachet","length","endgame","concat","delete_list","just_added","turn_num","active_player_num","player_num","nothing_placed","blocks","findIndex","block","content","player_turn"],"mappings":"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","sourcesContent":["import React, {useState,useContext,useEffect,useRef} from 'react';\r\nimport {UserContext} from '../../UserContext.js'\r\nimport {GamesContext,BlocksContext,PlayerListContext} from '../GamesContext.js'\r\nimport './Actionbar.css'\r\n\r\nfunction Draw_button(){\r\n    const {profile,setprofile}=useContext(UserContext)\r\n    const {playerlistState,setplayerlistState}=useContext(PlayerListContext)\r\n    const {gameState,setgameState}=useContext(GamesContext)   \r\n    const {boardState,setboardState}=useContext(BlocksContext)\r\n    const playerlistRef=useRef(null);\r\n    const gamestateRef=useRef(null);\r\n    const boardstateRef=useRef(null);\r\n    playerlistRef.current=playerlistState\r\n    gamestateRef.current=gameState\r\n    boardstateRef.current=boardState\r\n    const [drawActive,setdrawActive]=useState(false) \r\n\r\n    function Draw(){\r\n        setgameState((prevgameState=>{\r\n            let newgameState={...prevgameState}\r\n            newgameState.Player_list[prevgameState.your_index].draw()\r\n        \r\n            if (newgameState.Sachet.length==0){\r\n            newgameState.endgame=true\r\n            return newgameState\r\n            }else{\r\n            newgameState.Sachet=newgameState.Player_list[prevgameState.your_index].Sachet.concat(newgameState.Player_list[prevgameState.your_index].delete_list)\r\n            newgameState.just_added=[]\r\n            newgameState.turn_num+=1\r\n            return newgameState\r\n            }\r\n        }))    \r\n      }\r\n\r\n    useEffect(()=>{\r\n        let active_player_num=gameState.turn_num%gameState.player_num  \r\n        let nothing_placed=!boardState.blocks.findIndex(block=>{\r\n          if(block.content){\r\n            if(block.content.just_added){\r\n              return true\r\n            }\r\n          }\r\n          return false\r\n        })\r\n        if(active_player_num==gameState.your_index && !playerlistState[gameState.your_index].delete_list && nothing_placed){\r\n          setdrawActive(true)\r\n        }else{\r\n          setdrawActive(false)\r\n        }\r\n      },[gamestateRef.current.player_turn,boardstateRef.current])\r\n\r\n    return(\r\n        <div>\r\n            <button type=\"button\" className=\"draw_button\" onClick={Draw} disabled={drawActive}>Draw</button> \r\n        </div>)\r\n}\r\n\r\nexport default Draw_button"]},"metadata":{},"sourceType":"module"}